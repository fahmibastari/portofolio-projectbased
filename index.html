<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="image/profile/icon.png">
  <title>Fahmi Bastari - Project-Based Portfolio</title>
  <meta name="description" content="Project-based web portfolio: curated galleries with carousels, tech stacks, and concise writeups." />

  <!-- Bootstrap 5.3 + Icons (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Montserrat (variable) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wdth,wght@75..100,300..800&display=swap" rel="stylesheet">

  <style>
    /* =========================
       THEME TOKENS (semantic)
       ========================= */
    :root{
      /* brand */
      --brand:#5b7cff; /* primary base */
      --brand-600:#4a67d6;
      --brand-700:#3e58b9;

      /* dark */
      --bg:#0b0d10;
      --card:#11151b;
      --text:#e6edf3;
      --muted:#9aa4b2;
      --border:rgba(255,255,255,.12);
      --surface-contrast: rgba(255,255,255,.04);

      /* component helpers */
      --btn-plain:#1b2330;
      --btn-plain-hover:#222a38;
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --bs-secondary-color: color-mix(in oklab, var(--text) 70%, transparent);
        --bs-link-color: var(--brand);
        --bs-link-hover-color: color-mix(in oklab, var(--brand) 85%, black);
    }
    html[data-theme="light"]{
      --bg:#f6f8fb;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#5b6573;
      --border:rgba(0,0,0,.12);
      --surface-contrast: rgba(10,20,30,.06);
      --btn-plain:#edf2ff;
      --btn-plain-hover:#e3eaff;
      --shadow:0 12px 30px rgba(10,20,30,.10);
      --bs-secondary-color: color-mix(in oklab, var(--text) 60%, transparent);
    }

    /* Map sebagian ke Bootstrap vars supaya komponen ikut tema */
    :root,html[data-theme="light"]{
      --bs-body-bg: var(--bg);
      --bs-body-color: var(--text);
      --bs-border-color: var(--border);
      --bs-card-bg: var(--card);
      --bs-card-color: var(--text);
      --bs-link-color: var(--brand);
      --bs-primary: var(--brand);
    }

    /* Typography */
    body{
      background:var(--bg);
      color:var(--text);
      font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
      letter-spacing:.1px;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    h1,h2,h3,.navbar-brand{font-weight:700;}

    /* Navbar (glass) + toggler visibility */
    .navbar{
      background: color-mix(in oklab, var(--card) 82%, transparent);
      border-bottom:1px solid var(--border);
      backdrop-filter: blur(8px);
    }
    .navbar .navbar-brand, .navbar .nav-link{color:var(--text);}
    .navbar .nav-link:hover{color:var(--brand);}
    .navbar .navbar-toggler{
      border-color: var(--border);
    }
    /* Ensure toggler icon visible on both themes */
/* Ensure toggler icon visible on both themes */
.navbar .navbar-toggler-icon{
  /* dark theme: white lines */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22 M4 15h22 M4 23h22'/%3E%3C/svg%3E");
}

html[data-theme="light"] .navbar .navbar-toggler-icon{
  /* light theme: dark lines */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%230b1220' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22 M4 15h22 M4 23h22'/%3E%3C/svg%3E");
}
/* Search input group: kontras di dark & light */
.input-group .input-group-text{
  background: var(--surface-contrast);
  color: color-mix(in oklab, var(--text) 75%, transparent); /* ikon/search terlihat */
  border-color: var(--border);
}

.input-group .form-control{
  background: var(--card);
  color: var(--text);
  border-color: var(--border);
}

.input-group .form-control::placeholder{
  color: var(--bs-secondary-color);
  opacity: .9;
}

/* Focus ring yang konsisten */
.input-group .form-control:focus{
  background: var(--card);
  color: var(--text);
  border-color: color-mix(in oklab, var(--brand) 55%, var(--border));
  box-shadow: 0 0 0 .2rem color-mix(in oklab, var(--brand) 25%, transparent);
}

/* Sedikit tebalkan ikon biar kebaca */
.input-group-text .bi{
  opacity: .95;
}


    /* Hero */
    .hero{
      padding:6rem 0 2.5rem;
      background:
        radial-gradient(90rem 70rem at 10% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%),
        radial-gradient(80rem 70rem at 110% -20%, color-mix(in oklab, var(--text) 6%, transparent) 0%, transparent 60%);
    }
    html[data-theme="light"] .hero{
      background:linear-gradient(180deg, color-mix(in oklab, var(--brand) 8%, #ffffff) 0%, transparent 60%);
    }

    /* Cards, badges, shadows */
    .card{background:var(--card); border:1px solid var(--border);}
    .shadow-soft{box-shadow: var(--shadow);}

    .badge-tech{
      --chip-bg: color-mix(in oklab, var(--muted) 18%, transparent);
      background: var(--chip-bg);
      color: inherit;
      border:1px solid var(--border);
    }

    /* Buttons: make outline-light & light adaptive */
    .btn-outline-light{
      --btn-fg: var(--text);
      --btn-bd: var(--border);
      color: var(--btn-fg);
      border-color: var(--btn-bd);
      background: transparent;
    }
    .btn-outline-light:hover,
    .btn-outline-light:focus{
      background: var(--btn-plain);
      border-color: color-mix(in oklab, var(--brand) 40%, var(--btn-bd));
      color: var(--text);
    }
    .btn-light{
      color: color-mix(in oklab, var(--text) 80%, black);
      background: var(--btn-plain);
      border-color: var(--border);
    }
    .btn-light:hover{ background: var(--btn-plain-hover); }

    /* Filter pills */
    .btn-filter{
      border-color: var(--border);
      background: var(--card);
      color: var(--text);
    }
    .btn-filter.active{
      background: color-mix(in oklab, var(--brand) 22%, var(--card));
      border-color: color-mix(in oklab, var(--brand) 40%, var(--border));
    }

    /* Meta text, placeholders */
    .project-meta{color:var(--muted);}
    .search-input::placeholder{color:var(--muted);}

    /* Carousel media */
    .carousel-item img{object-fit:cover; height:480px;}
    .carousel-control-prev-icon,
    .carousel-control-next-icon{
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
    }

    /* Thumbnails */
    .thumbs{gap:.5rem;}
    .thumbs img{
      height:64px; width:110px; object-fit:cover; cursor:pointer;
      border:1px solid var(--border); border-radius:.5rem;
      opacity:.75; transition:opacity .2s, transform .2s, outline-color .2s;
      background: var(--surface-contrast);
    }
    .thumbs img.active{opacity:1; outline:2px solid var(--brand);}

    /* Animations */
    .fade-in{opacity:0; transform:translateY(12px); transition:opacity .6s ease, transform .6s ease;}
    .fade-in.show{opacity:1; transform:none;}

    /* Footer */
    .footer{color:var(--muted);}

    /* Back to top */
    #toTop{position:fixed; right:16px; bottom:16px; display:none; z-index:1030;}

    /* Modal/lightbox */
    .modal-content{background:var(--card); color:var(--text); border:1px solid var(--border);}
    .lb-img{max-height:85vh; object-fit:contain;}

    /* Focus ring for a11y (visible on dark & light) */
    :focus-visible{
      outline:2px solid color-mix(in oklab, var(--brand) 55%, var(--text));
      outline-offset:2px;
      border-radius:.4rem;
    }

    /* Circular professional avatar */
.avatar-pro{
  width:96px; height:96px; border-radius:50%;
  object-fit:cover;
  /* border:2px solid color-mix(in oklab, var(--brand) 45%, var(--border)); */
  box-shadow: var(--shadow);
  background: var(--surface-contrast);
}
/* Jaga kompatibilitas komponen custom yang pakai muted/meta */
.text-muted,
.project-meta{
  color: var(--bs-secondary-color) !important;
}

/* Rapikan tombol pada layar kecil */
@media (max-width: 420px){
  #contact .btn{ flex:1 1 auto; }
}
/* ----- Locked preview (di kartu) ----- */
.preview-locked .carousel { position: relative; }
.preview-locked .carousel-item img{
  filter: blur(8px) saturate(.9) brightness(.92);
  transform: scale(1.02);
}
.preview-locked .thumbs img{
  filter: blur(2px) opacity(.7);
}
/* Watermark tipis */
.preview-locked .carousel::after{
  content: "PREVIEW • WORK IN PROGRESS";
  position: absolute; inset: 12px;
  display: grid; place-items: center;
  font-weight: 700; letter-spacing: .12em;
  color: color-mix(in oklab, var(--text) 22%, transparent);
  border: 1px dashed var(--border);
  border-radius: .75rem;
  pointer-events: none;
  text-align: center;
}

/* ----- Blur juga saat dibuka di lightbox ----- */
.lb-img.locked{
  filter: blur(10px) saturate(.9) brightness(.92);
  transform: scale(1.01);
}
/* ===== PRINT ===== */
@page { size: A4; margin: 14mm; } /* ganti ke Letter kalau perlu */
@media print{
  /* Pakai palet terang biar kontras */
  :root{
    --bg:#ffffff; --card:#ffffff; --text:#000000; --muted:#333333; --border:#dddddd;
  }
  html, body{ background:#fff !important; color:#000 !important; }
  *{ animation:none !important; transition:none !important; }

  /* Warna & latar cetak apa adanya */
  body{ -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  /* Sembunyikan hal interaktif */
  .navbar, #toTop, .thumbs, .open-lightbox, .carousel-control-prev, .carousel-control-next,
  #lightbox, .btn, .input-group, .btn-filter{ display:none !important; }

  /* Hero background diganti polos */
  .hero{ background:#fff !important; padding-top:0 !important; }

  /* Kartu: maksimal lebar halaman, hindari pecah di tengah */
  .card{ box-shadow:none !important; border:1px solid #ddd !important; }
  .fade-in{ opacity: 1 !important; transform: none !important; }
  .project-card{ display: block !important; }
  /* Carousel jadi galeri bertumpuk */
  .carousel, .carousel-inner{ display:block !important; }
  .carousel-item{ display:block !important; opacity:1 !important; transform:none !important; }
  .carousel-item img{ height:auto !important; max-height:none !important; margin:0 0 8px 0; }

  /* Tipografi & link */
  a{ color:#000 !important; text-decoration:underline; }
  .badge-tech{ border-color:#ccc !important; }

  /* Section breaks */
  #about{ page-break-before: always; }
  #contact{ page-break-before: always; }
}


  </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#topbar" data-bs-offset="90" tabindex="0">

  <!-- Navbar -->
  <nav id="topbar" class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <a class="navbar-brand fw-semibold" href="#home">FAHMI BASTARI</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
          <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          <li class="nav-item ms-lg-2">
            <button id="downloadPdf" class="btn btn-sm btn-outline-light">
              <i class="bi bi-download"></i> <span class="d-none d-sm-inline">PDF</span>
            </button>
          </li>                 
          <li class="nav-item ms-lg-2">
            <button id="themeToggle" class="btn btn-sm btn-outline-light">
              <i class="bi bi-moon-stars"></i> <span class="d-none d-sm-inline">Theme</span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header id="home" class="hero">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <h1 class="display-5 fw-bold mb-3">Project-Based Web Portfolio</h1>
          <p class="lead mb-4">A curated, product-focused portfolio: real UI captures, concise case notes, and pragmatic stacks—built clean, accessible, and ready to scale.</p>
          <div class="d-flex gap-2 flex-wrap">
            <span class="badge rounded-pill badge-tech">Bootstrap 5</span>
            <span class="badge rounded-pill badge-tech">Responsive</span>
            <span class="badge rounded-pill badge-tech">Lightbox</span>
            <span class="badge rounded-pill badge-tech">Dark/Light Theme</span>
          </div>
        </div>
      </div>

      <!-- Filter & Search -->
      <div class="d-flex flex-wrap gap-2 align-items-center mt-4">
        <button class="btn btn-outline-light btn-sm btn-filter active" data-filter="all">All</button>
        <button class="btn btn-outline-light btn-sm btn-filter" data-filter="cced">CCED</button>
        <button class="btn btn-outline-light btn-sm btn-filter" data-filter="examlent">Examlent</button>
        <button class="btn btn-outline-light btn-sm btn-filter" data-filter="silawak">SILAWAK</button>
        <button class="btn btn-outline-light btn-sm btn-filter" data-filter="freelance">Freelancer Tracker</button>

        <div class="ms-auto"></div>
        <div class="input-group w-auto">
          <span class="input-group-text"><i class="bi bi-search"></i></span>
          <input id="search" type="search" class="form-control search-input" placeholder="Search by title, tech, feature..." />
        </div>
      </div>
    </div>
  </header>

  <!-- Projects -->
  <main id="projects" class="py-3 pb-5">
    <div class="container">
      <div class="row g-4" id="projectGrid">

        <!-- Project: CCED -->
        <div class="col-12 project-card fade-in" data-tags="cced" data-title="CCED — Hiring & Profile Portal" data-tech="nextjs typescript tailwind supabase job portal role based" data-feat="dashboard profile admin job posting">
          <div class="card shadow-soft overflow-hidden">
            <div class="row g-0 align-items-stretch">
              <div class="col-lg-7">
                <div id="carousel-cced" class="carousel slide" data-bs-ride="false">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img loading="lazy" src="image/cced/LandingPage.png" class="d-block w-100" alt="CCED Landing Page" />
                    </div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/LoginPage.png" class="d-block w-100" alt="CCED Login" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/RegisterPage.png" class="d-block w-100" alt="CCED Register" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/CompanyDashboard.png" class="d-block w-100" alt="Company Dashboard" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/CompanyDetailJob.png" class="d-block w-100" alt="Company Job Detail" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/CompanyProfile.png" class="d-block w-100" alt="Company Profile" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/JobSeekerDashboard.png" class="d-block w-100" alt="Job Seeker Dashboard" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/JobSeekerProfile.png" class="d-block w-100" alt="Job Seeker Profile" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/AdminDashboard.png" class="d-block w-100" alt="Admin Dashboard" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/cced/AdminAddJob.png" class="d-block w-100" alt="Admin Add Job" /></div>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carousel-cced" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carousel-cced" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
                <!-- Thumbnails -->
                <div class="thumbs p-3 d-flex flex-wrap">
                  <img src="image/cced/LandingPage.png" alt="thumb" data-target="#carousel-cced" data-index="0" class="rounded active">
                  <img src="image/cced/LoginPage.png" alt="thumb" data-target="#carousel-cced" data-index="1" class="rounded">
                  <img src="image/cced/RegisterPage.png" alt="thumb" data-target="#carousel-cced" data-index="2" class="rounded">
                  <img src="image/cced/CompanyDashboard.png" alt="thumb" data-target="#carousel-cced" data-index="3" class="rounded">
                  <img src="image/cced/CompanyDetailJob.png" alt="thumb" data-target="#carousel-cced" data-index="4" class="rounded">
                  <img src="image/cced/CompanyProfile.png" alt="thumb" data-target="#carousel-cced" data-index="5" class="rounded">
                  <img src="image/cced/JobSeekerDashboard.png" alt="thumb" data-target="#carousel-cced" data-index="6" class="rounded">
                  <img src="image/cced/JobSeekerProfile.png" alt="thumb" data-target="#carousel-cced" data-index="7" class="rounded">
                  <img src="image/cced/AdminDashboard.png" alt="thumb" data-target="#carousel-cced" data-index="8" class="rounded">
                  <img src="image/cced/AdminAddJob.png" alt="thumb" data-target="#carousel-cced" data-index="9" class="rounded">
                </div>
              </div>
              <div class="col-lg-5 d-flex">
                <div class="card-body d-flex flex-column p-4">
                  <div class="d-flex align-items-center gap-2 mb-2">
                    <span class="badge rounded-pill bg-secondary">CCED</span>
                    <small class="project-meta">Job Portal</small>
                  </div>
                  <h3 class="h4">CCED - Hiring &amp; Profile Portal</h3>
                  <p class="mb-3">A multi-role job marketplace concept (job seeker, company, admin). Screens cover authentication, dashboards, company job management, and profile areas.</p>
                  <div class="d-flex gap-2 flex-wrap mb-3">
                    <span class="badge rounded-pill badge-tech">Next.js 15</span>
                    <span class="badge rounded-pill badge-tech">TypeScript</span>
                    <span class="badge rounded-pill badge-tech">Tailwind + shadcn/ui</span>
                    <span class="badge rounded-pill badge-tech">Supabase (Auth/Storage)</span>
                    <span class="badge rounded-pill badge-tech">Prisma + NeonDB</span>
                  </div>
                  <ul class="small project-meta mb-4">
                    <li>Company & seeker dashboards with role-based UI.</li>
                    <li>Job posting, detail, and application flow mockups.</li>
                    <li>Admin views for content & listing controls.</li>
                  </ul>
                  <div class="mt-auto d-flex gap-2">
                    <!-- di tiap project -->
<a class="btn btn-light btn-discuss" href="#contact">
    <i class="bi bi-chat-right-dots me-1"></i>Discuss
  </a>
  
                    <button class="btn btn-outline-light open-lightbox" data-gallery="#carousel-cced"><i class="bi bi-arrows-fullscreen me-1"></i>View Large</button>
                  </div>
                  <div class="mt-3 small project-meta"><span class="slide-counter" data-for="#carousel-cced">1/10</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Project: Examlent -->
        <div class="col-12 project-card fade-in" data-tags="examlent" data-title="Examlent — Exam Simulator Platform" data-tech="nextjs typescript prisma neon supabase tailwind shadcn exam simulator csv" data-feat="token join packages bank question essay review">
          <div class="card shadow-soft overflow-hidden">
            <div class="row g-0 align-items-stretch">
              <div class="col-lg-7 order-lg-2">
                <div id="carousel-examlent" class="carousel slide" data-bs-ride="false">
                  <div class="carousel-inner">
                    <div class="carousel-item active"><img loading="lazy" src="image/examlent/StudentLandingPage.png" class="d-block w-100" alt="Student Landing" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/StudentJoinPortal.png" class="d-block w-100" alt="Student Join Portal" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/StudentJoinExam.png" class="d-block w-100" alt="Student Join Exam" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/StudentJoinExam2.png" class="d-block w-100" alt="Student Join Exam 2" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminLogin.png" class="d-block w-100" alt="Admin Login" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminManagePackage.png" class="d-block w-100" alt="Admin Manage Package" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminPackageList.png" class="d-block w-100" alt="Admin Package List" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminManageQuestion - Question Type.png" class="d-block w-100" alt="Admin Manage Question – Type" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminManageQuestion - QuestionList.png" class="d-block w-100" alt="Admin Manage Question – List" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminManageQuestion - Reading Passage.png" class="d-block w-100" alt="Admin Manage Question – Reading Passage" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminReviewStudentAttempt.png" class="d-block w-100" alt="Admin Review Attempt" /></div>
                    <div class="carousel-item"><img loading="lazy" src="image/examlent/AdminExamResult.png" class="d-block w-100" alt="Admin Exam Result" /></div>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carousel-examlent" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carousel-examlent" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
                <!-- Thumbnails -->
                <div class="thumbs p-3 d-flex flex-wrap">
                  <img src="image/examlent/StudentLandingPage.png" alt="thumb" data-target="#carousel-examlent" data-index="0" class="rounded active">
                  <img src="image/examlent/StudentJoinPortal.png" alt="thumb" data-target="#carousel-examlent" data-index="1" class="rounded">
                  <img src="image/examlent/StudentJoinExam.png" alt="thumb" data-target="#carousel-examlent" data-index="2" class="rounded">
                  <img src="image/examlent/StudentJoinExam2.png" alt="thumb" data-target="#carousel-examlent" data-index="3" class="rounded">
                  <img src="image/examlent/AdminLogin.png" alt="thumb" data-target="#carousel-examlent" data-index="4" class="rounded">
                  <img src="image/examlent/AdminManagePackage.png" alt="thumb" data-target="#carousel-examlent" data-index="5" class="rounded">
                  <img src="image/examlent/AdminPackageList.png" alt="thumb" data-target="#carousel-examlent" data-index="6" class="rounded">
                  <img src="image/examlent/AdminManageQuestion - Question Type.png" alt="thumb" data-target="#carousel-examlent" data-index="7" class="rounded">
                  <img src="image/examlent/AdminManageQuestion - QuestionList.png" alt="thumb" data-target="#carousel-examlent" data-index="8" class="rounded">
                  <img src="image/examlent/AdminManageQuestion - Reading Passage.png" alt="thumb" data-target="#carousel-examlent" data-index="9" class="rounded">
                  <img src="image/examlent/AdminReviewStudentAttempt.png" alt="thumb" data-target="#carousel-examlent" data-index="10" class="rounded">
                  <img src="image/examlent/AdminExamResult.png" alt="thumb" data-target="#carousel-examlent" data-index=11 class="rounded">
                </div>
              </div>
              <div class="col-lg-5 order-lg-1 d-flex">
                <div class="card-body d-flex flex-column p-4">
                  <div class="d-flex align-items-center gap-2 mb-2">
                    <span class="badge rounded-pill bg-secondary">Examlent</span>
                    <small class="project-meta">Exam Platform</small>
                  </div>
                  <h3 class="h4">Examlent - Exam Simulator Platform</h3>
                  <p class="mb-3">Role-based exam system with packages, token-based joins, question banks (MCQ, MSQ, T/F, short, essay), manual review for essay, and CSV export of results.</p>
                  <div class="d-flex gap-2 flex-wrap mb-3">
                    <span class="badge rounded-pill badge-tech">Next.js 15</span>
                    <span class="badge rounded-pill badge-tech">TypeScript</span>
                    <span class="badge rounded-pill badge-tech">Prisma + NeonDB</span>
                    <span class="badge rounded-pill badge-tech">Supabase (Auth/Storage)</span>
                    <span class="badge rounded-pill badge-tech">Tailwind + shadcn/ui</span>
                  </div>
                  <ul class="small project-meta mb-4">
                    <li>Admin: manage packages, questions, and results.</li>
                    <li>Student: join via token, take exams with autosave.</li>
                    <li>Exports: CSV results & manual essay grading.</li>
                  </ul>
                  <div class="mt-auto d-flex gap-2">
                                        <!-- di tiap project -->
                    <a class="btn btn-light btn-discuss" href="#contact">
                        <i class="bi bi-chat-right-dots me-1"></i>Discuss
                    </a>
                    <button class="btn btn-outline-light open-lightbox" data-gallery="#carousel-examlent"><i class="bi bi-arrows-fullscreen me-1"></i>View Large</button>
                  </div>
                  <div class="mt-3 small project-meta"><span class="slide-counter" data-for="#carousel-examlent">1/12</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Project: SILAWAK -->
<div class="col-12 project-card fade-in"
data-tags="silawak"
data-title="SILAWAK — Wakaf Service Info"
data-tech="html bootstrap5 fontawesome google fonts accordion maps"
data-feat="persyaratan waktu tarif formulir google drive banner gif footer maps kontak sosial">
<div class="card shadow-soft overflow-hidden">
<div class="row g-0 align-items-stretch">
 <div class="col-lg-7">
   <div id="carousel-silawak" class="carousel slide" data-bs-ride="false">
     <div class="carousel-inner">
       <div class="carousel-item active"><img loading="lazy" src="image/wakaf/1.png" class="d-block w-100" alt="SILAWAK — Header & Hero" /></div>
       <div class="carousel-item"><img loading="lazy" src="image/wakaf/2.png" class="d-block w-100" alt="SILAWAK — Accordion Layanan" /></div>
       <div class="carousel-item"><img loading="lazy" src="image/wakaf/3.png" class="d-block w-100" alt="SILAWAK — Footer & Maps" /></div>
     </div>
     <button class="carousel-control-prev" type="button" data-bs-target="#carousel-silawak" data-bs-slide="prev">
       <span class="carousel-control-prev-icon" aria-hidden="true"></span>
       <span class="visually-hidden">Previous</span>
     </button>
     <button class="carousel-control-next" type="button" data-bs-target="#carousel-silawak" data-bs-slide="next">
       <span class="carousel-control-next-icon" aria-hidden="true"></span>
       <span class="visually-hidden">Next</span>
     </button>
   </div>
   <!-- Thumbnails -->
   <div class="thumbs p-3 d-flex flex-wrap">
     <img src="image/wakaf/1.png" alt="thumb" data-target="#carousel-silawak" data-index="0" class="rounded active">
     <img src="image/wakaf/2.png" alt="thumb" data-target="#carousel-silawak" data-index="1" class="rounded">
     <img src="image/wakaf/3.png" alt="thumb" data-target="#carousel-silawak" data-index="2" class="rounded">
   </div>
 </div>
 <div class="col-lg-5 d-flex">
   <div class="card-body d-flex flex-column p-4">
     <div class="d-flex align-items-center gap-2 mb-2">
       <span class="badge rounded-pill bg-secondary">SILAWAK</span>
       <small class="project-meta">Institution · Info Service</small>
     </div>
     <h3 class="h4">SILAWAK - Wakaf Service Information</h3>
     <p class="mb-3">
        A static “dashboard” page for the Sukoharjo Land Office: presents the workflow and requirements for waqf (wakaf) services in an accordion, with Google Drive form links, a service banner, and an informative footer (address, embedded Google Maps, contacts, and social channels).
     </p>
     <div class="d-flex gap-2 flex-wrap mb-3">
       <span class="badge rounded-pill badge-tech">HTML</span>
       <span class="badge rounded-pill badge-tech">CSS</span>
       <span class="badge rounded-pill badge-tech">Javascript</span>
       <span class="badge rounded-pill badge-tech">Bootstrap 5</span>
       <span class="badge rounded-pill badge-tech">Font Awesome</span>
       <span class="badge rounded-pill badge-tech">Google Fonts</span>
     </div>
     <ul class="small project-meta mb-4">
        <li>Accordion: 3 categories (From Uncertified Land, From State Land, From Certified Land).</li>
        <li>Each panel includes: Requirements, Processing Time, Fees, Notes, and a Google Form button.</li>
        <li>Footer: office identity, Maps embed, contact details, and social media links.</li>
      </ul>
     <div class="mt-auto d-flex gap-2">
       <a class="btn btn-light btn-discuss" href="#contact"><i class="bi bi-chat-right-dots me-1"></i>Discuss</a>
       <button class="btn btn-outline-light open-lightbox" data-gallery="#carousel-silawak"><i class="bi bi-arrows-fullscreen me-1"></i>View Large</button>
     </div>
     <div class="mt-3 small project-meta"><span class="slide-counter" data-for="#carousel-silawak">1/3</span></div>
   </div>
 </div>
</div>
</div>
</div>
<!-- Project: Freelancer Tracker -->
<div class="col-12 project-card fade-in preview-locked"
     data-tags="freelance"
     data-title="Freelancer Tracker — Work • Time • Money"
     data-tech="web app schedule payments multi-currency timezone csv reminders"
     data-feat="clients sessions weekly schedule reminders paid unpaid csv export global">
  <div class="card shadow-soft overflow-hidden">
    <div class="row g-0 align-items-stretch">
      <div class="col-lg-7">
        <div id="carousel-freelance" class="carousel slide" data-bs-ride="false">
          <div class="carousel-inner">
            <div class="carousel-item active"><img loading="lazy" src="image/freelance/1.png" class="d-block w-100" alt="Freelancer Tracker — Dashboard" /></div>
            <div class="carousel-item"><img loading="lazy" src="image/freelance/2.png" class="d-block w-100" alt="Company / Client list" /></div>
            <div class="carousel-item"><img loading="lazy" src="image/freelance/3.png" class="d-block w-100" alt="Sessions & fees" /></div>
            <div class="carousel-item"><img loading="lazy" src="image/freelance/4.png" class="d-block w-100" alt="Presence & status" /></div>
            <div class="carousel-item"><img loading="lazy" src="image/freelance/5.png" class="d-block w-100" alt="Income summary" /></div>
            <div class="carousel-item"><img loading="lazy" src="image/freelance/6.png" class="d-block w-100" alt="Planned weekly schedule" /></div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carousel-freelance" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carousel-freelance" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
        <!-- Thumbnails -->
        <div class="thumbs p-3 d-flex flex-wrap">
          <img src="image/freelance/1.png" alt="thumb" data-target="#carousel-freelance" data-index="0" class="rounded active">
          <img src="image/freelance/2.png" alt="thumb" data-target="#carousel-freelance" data-index="1" class="rounded">
          <img src="image/freelance/3.png" alt="thumb" data-target="#carousel-freelance" data-index="2" class="rounded">
          <img src="image/freelance/4.png" alt="thumb" data-target="#carousel-freelance" data-index="3" class="rounded">
          <img src="image/freelance/5.png" alt="thumb" data-target="#carousel-freelance" data-index="4" class="rounded">
          <img src="image/freelance/6.png" alt="thumb" data-target="#carousel-freelance" data-index="5" class="rounded">
        </div>
      </div>

      <div class="col-lg-5 d-flex">
        <div class="card-body d-flex flex-column p-4">
          <div class="d-flex align-items-center gap-2 mb-2">
            <span class="badge rounded-pill bg-secondary">Freelancer Tracker</span>
            <small class="project-meta">In&nbsp;Progress · Operations App</small>
          </div>
          <h3 class="h4">Freelancer Tracker - Work • Time • Money</h3>
          <p class="mb-3">
            (In Progress) A global web app to keep freelancers on-time and in control: manage clients and sessions, see a weekly view across accounts, and track fees & payment status—built with multi-currency and automatic time-zones in mind. Private demo available on request.
          </p>
          <ul class="small project-meta mb-4">
            <li>Core: clients & sessions, presence marking, Paid/Unpaid tracking, CSV export.</li>
  <li>Global-ready: multi-currency, auto time-zones, localized formats.</li>
  <li>Roadmap: recurring sessions, quick invoice PDF, monthly analytics; calendar integrations next.</li>
</ul>
          <div class="mt-auto d-flex gap-2">
            <div class="d-flex align-items-center gap-2 mb-2">
                <span class="badge rounded-pill bg-warning text-dark">In Progress</span>
              </div>
            <a class="btn btn-light btn-discuss" href="#contact">
                <i class="bi bi-eye me-1"></i>Request Demo
              </a>
            <button class="btn btn-outline-light open-lightbox" data-gallery="#carousel-freelance"><i class="bi bi-arrows-fullscreen me-1"></i>View Large</button>
          </div>
          <div class="mt-3 small project-meta"><span class="slide-counter" data-for="#carousel-freelance">1/6</span></div>
        </div>
      </div>
    </div>
  </div>
</div>


      </div><!-- /grid -->
    </div>
  </main>

  <!-- Contact -->
<section id="contact" class="py-5 border-top">
    <div class="container">
      <div class="row g-4 align-items-center">
        <div class="col-12 col-md-7">
          <div class="d-flex align-items-center gap-3">
            <img
              src="image/profile/profile.jpg"
              alt="Muhammad Fahmi Bastari"
              class="avatar-pro"
              width="96" height="96" loading="lazy"
            />
            <div>
              <h2 class="h4 mb-1">Get in touch</h2>
              <div class="text-muted small">Muhammad Fahmi Bastari · Frontend &amp; Web Developer</div>
              <div class="text-muted small">Lampung, Indonesia · <a class="link-underline link-underline-opacity-0" href="mailto:fahmibastari@gmail.com">fahmibastari@gmail.com</a></div>
            </div>
          </div>
          <p class="project-meta mt-3 mb-0">
            Want the full case study, code, or a live walkthrough? Reach me here:
          </p>
        </div>
  
        <div class="col-12 col-md-5">
          <div class="d-flex flex-wrap gap-2 justify-content-md-end">
            <a class="btn btn-outline-light" href="https://github.com/fahmibastari" target="_blank" rel="noopener">
              <i class="bi bi-github me-1"></i>GitHub
            </a>
            <a class="btn btn-outline-light" href="https://www.linkedin.com/in/fahmibastari/" target="_blank" rel="noopener">
              <i class="bi bi-linkedin me-1"></i>LinkedIn
            </a>
            <a class="btn btn-outline-light" href="https://tinyurl.com/PortofolioFahmiBastari" target="_blank" rel="noopener">
              <i class="bi bi-globe2 me-1"></i>Portfolio
            </a>
            <a class="btn btn-light" href="mailto:fahmibastari@gmail.com">
              <i class="bi bi-envelope me-1"></i>Email
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About -->
<section id="about" class="py-5 border-top">
    <div class="container">
      <div class="row g-4 align-items-start">
        <div class="col-lg-7">
          <h2 class="h4 mb-3">About Me</h2>
          <p class="project-meta mb-3">
            A front-end/UX-leaning developer who ships clean, accessible,
            and fast web apps. Work across design and engineering: from wireframes and usability testing
            to componentized UIs and pragmatic data flows. Most at home tooling with:
            <em>Next.js, TypeScript, Tailwind, Prisma</em>-plus a solid base in <em>HTML/CSS/JS & PHP/MySQL</em>.
          </p>
          <ul class="mt-2">
            <li><strong>Product impact:</strong> cut exam task time by ~85% with clearer flows and a reusable system; also improved initial load ~40%.</li>
            <li><strong>Teaching & mentoring:</strong> assistant lecturer for Web & AR/VR; helped students ship 15+ demos and lift accessibility/usability ~30%.</li>
            <li><strong>Ops & data:</strong> standardized daily logs in an F&B collab and reduced stock mismatches ~40% with mobile-first patterns.</li>
            <li><strong>What I enjoy:</strong> tidy UI copy, a11y-first patterns, and small systems that scale—delivered fast, documented just enough.</li>
          </ul>
          <p class="project-meta mt-3 mb-0">
            Open to collaborations and contract work. Want a private demo or a quick walkthrough? Jump to <a href="#contact">Contact</a>.
          </p>
        </div>
  
        <div class="col-lg-5">
          <div class="card">
            <div class="card-body d-flex flex-wrap gap-2">
              <span class="badge rounded-pill badge-tech">Next.js</span>
              <span class="badge rounded-pill badge-tech">TypeScript</span>
              <span class="badge rounded-pill badge-tech">Tailwind</span>
              <span class="badge rounded-pill badge-tech">Prisma / Postgres</span>
              <span class="badge rounded-pill badge-tech">Supabase</span>
              <span class="badge rounded-pill badge-tech">PHP / MySQL</span>
              <span class="badge rounded-pill badge-tech">Accessibility (WCAG)</span>
              <span class="badge rounded-pill badge-tech">Design Systems</span>
              <span class="badge rounded-pill badge-tech">Performance</span>
              <span class="badge rounded-pill badge-tech">CSV / Export</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  
  <footer class="footer py-4 border-top">
    <div class="container d-flex justify-content-between align-items-center">
        <small class="d-block mt-1 project-meta">© <span id="year"></span> Muhammad Fahmi Bastari — All rights reserved.</small>
    </div>
  </footer>

  <!-- Back to top -->
  <button id="toTop" class="btn btn-primary rounded-circle p-3" aria-label="Back to top">
    <i class="bi bi-chevron-up"></i>
  </button>

  <!-- Lightbox Modal -->
  <div class="modal fade" id="lightbox" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down modal-xl">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title">Preview</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body d-flex justify-content-center align-items-center">
          <img id="lbImage" src="" alt="preview" class="img-fluid lb-img rounded shadow-soft">
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ===== Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Theme init: use saved, else follow OS preference
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme');
    if(!savedTheme){
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
    }else{
      document.documentElement.setAttribute('data-theme', savedTheme);
    }
    function setTheme(next){
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeToggle.innerHTML = (next === 'dark')
        ? '<i class="bi bi-moon-stars"></i> <span class="d-none d-sm-inline">Theme</span>'
        : '<i class="bi bi-brightness-high"></i> <span class="d-none d-sm-inline">Theme</span>';
    }
    // apply icon on load
    setTheme(document.documentElement.getAttribute('data-theme') || 'dark');

    themeToggle.addEventListener('click', ()=>{
      const cur = document.documentElement.getAttribute('data-theme') || 'dark';
      setTheme(cur === 'dark' ? 'light' : 'dark');
    });

    // ===== Intersection fade-in
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target);} });
    }, {threshold: .12});
    document.querySelectorAll('.fade-in').forEach(el=>io.observe(el));

    // ===== Filter buttons
    const filterButtons = document.querySelectorAll('.btn-filter');
    const projectCards = document.querySelectorAll('.project-card');
    let activeFilter = 'all';
    filterButtons.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        filterButtons.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        activeFilter = btn.dataset.filter;
        applyFilterSearch();
      });
    });

    // ===== Search
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', applyFilterSearch);

    function applyFilterSearch(){
      const q = searchInput.value.trim().toLowerCase();
      projectCards.forEach(card=>{
        const tags = card.dataset.tags.split(',');
        const hay = (card.dataset.title + ' ' + card.dataset.tech + ' ' + card.dataset.feat).toLowerCase();
        const matchFilter = (activeFilter === 'all' || tags.includes(activeFilter));
        const matchSearch = (!q || hay.includes(q));
        card.style.display = (matchFilter && matchSearch) ? '' : 'none';
      });
    }

    // ===== Thumbnails bind
    document.querySelectorAll('.thumbs img').forEach(thumb=>{
      thumb.addEventListener('click', ()=>{
        const target = document.querySelector(thumb.dataset.target);
        const carousel = bootstrap.Carousel.getOrCreateInstance(target);
        const index = parseInt(thumb.dataset.index, 10);
        carousel.to(index);
      });
    });

    // ===== Sync thumbs + counters on slide
    function bindCarouselExtras(id){
    const el = document.querySelector(id);
    const counter = document.querySelector(`.slide-counter[data-for="${id}"]`);
    const thumbs = el.closest('.row').querySelectorAll('.thumbs img');
    const total = el.querySelectorAll('.carousel-item').length;

    el.addEventListener('slide.bs.carousel', (ev)=>{
      thumbs.forEach(t=>t.classList.remove('active'));
      const nextIndex = ev.to;
      if(thumbs[nextIndex]) thumbs[nextIndex].classList.add('active');
      if(counter) counter.textContent = (nextIndex + 1) + '/' + total;
    });

    if(counter){
      const activeIdx = Array.from(el.querySelectorAll('.carousel-item'))
        .indexOf(el.querySelector('.carousel-item.active'));
      counter.textContent = (activeIdx + 1) + '/' + total;
    }

    // TERBARU: pass flag locked kalau parent mengandung .preview-locked
    const isLocked = !!el.closest('.preview-locked');

    el.querySelectorAll('.carousel-item img').forEach(img=>{
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', ()=>openLightbox(img.src, isLocked));
    });
  }

    bindCarouselExtras('#carousel-cced');
    bindCarouselExtras('#carousel-examlent');
    bindCarouselExtras('#carousel-silawak');
    bindCarouselExtras('#carousel-freelance');

    // ===== Lightbox (Bootstrap modal)
    const lbModal = new bootstrap.Modal('#lightbox');
    const lbImg = document.getElementById('lbImage');
    function openLightbox(src, locked=false){
    lbImg.src = src;
    lbImg.classList.toggle('locked', !!locked);
    lbModal.show();
  }
  
    // “View Large” buttons (open current slide)
    document.querySelectorAll('.open-lightbox').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const gallerySel = btn.dataset.gallery;
      const cur = document.querySelector(`${gallerySel} .carousel-item.active img`);
      const isLocked = !!document.querySelector(gallerySel)?.closest('.preview-locked');
      if(cur) openLightbox(cur.src, isLocked);
    });
  });

    // ===== Back to top
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', ()=>{
      toTop.style.display = window.scrollY > 600 ? 'block' : 'none';
    });
    toTop.addEventListener('click', ()=>window.scrollTo({top:0, behavior:'smooth'}));

    // ===== Encode spaces safety for any images (optional guard)
    document.querySelectorAll('img').forEach(img=>{
      if(img.getAttribute('src') && img.getAttribute('src').includes(' ')){
        img.setAttribute('src', img.getAttribute('src').replace(/ /g, '%20'));
      }
    });

    (function () {
    const EMAIL = "fahmibastari@gmail.com";
    document.querySelectorAll('.btn-discuss').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const card = btn.closest('.project-card');
        const title = card?.dataset?.title || 'Portfolio Project';
        const subject = encodeURIComponent(`Inquiry about ${title}`);
        const body = encodeURIComponent(
`Hi Fahmi,

I'd like to discuss ${title}.
Context:
- 

Thanks!`
        );
        // buka mail client; kalau diblok, fallback ke #contact
        const url = `mailto:${EMAIL}?subject=${subject}&body=${body}`;
        try {
          window.location.href = url;
          // optional: juga scroll ke contact agar tombol tetap terasa bekerja
          document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' });
        } catch {
          location.hash = '#contact';
        }
      });
    });
  })();
  (function(){
    const btn = document.getElementById('downloadPdf');
    if(!btn) return;

    async function downloadPortfolioPdf() {
      const fn = 'Fahmi_Bastari_Portfolio.pdf';
      // Ambil URL halaman sekarang (yang sudah terdeploy di Netlify)
      const currentUrl = window.location.href;
      const endpoint = `/.netlify/functions/snapshot-pdf?url=${encodeURIComponent(currentUrl)}&filename=${encodeURIComponent(fn)}&format=A4`;

      const res = await fetch(endpoint);
      if(!res.ok){
        alert('Failed to render PDF. Please try again.');
        return;
      }
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = fn;
      document.body.appendChild(a);
      a.click();
      URL.revokeObjectURL(url);
      a.remove();
    }

    btn.addEventListener('click', async () => {
  const fn = 'Fahmi_Bastari_Portfolio.pdf';
  const endpoint = `/.netlify/functions/snapshot-pdf?url=${encodeURIComponent(location.href)}&filename=${encodeURIComponent(fn)}&format=A4`;
  const res = await fetch(endpoint);
  if (!res.ok) {
    const text = await res.text().catch(() => '');
    alert(`Failed to render PDF.\n${text || res.statusText}`);
    return;
  }
  const blob = await res.blob();
  const url = URL.createObjectURL(blob);
  const a = Object.assign(document.createElement('a'), { href: url, download: fn });
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

  })();
  </script>
</body>
</html>
